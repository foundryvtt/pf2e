<div class="tab spellbook" data-group="primary" data-tab="spellbook">

    
        <ol class="spellcastingEntry-list directory-list">
            {{#each actor.spellcastingEntries as |entry eid|}}  
            <li class="item" data-skill="spelldc" data-item-type="spellcastingEntry" data-item-id="{{entry.id}}">
                <!-- <h3 class="item-name pf-heading pf-actions">{{{entry.tradition.title}}} {{{entry.prepared.title}}} Spells</h3> -->
                <div class="action-header" style="display:flex;" >
                    <h3 class="item-name pf-heading pf-actions" style="padding-left: 32px;">{{{entry.name}}}</h3>
                    {{#if ../owner}}
                    <div class="item-controls" style="display: flex;">
                        <a class="item-control item-delete" title="Remove Spellcasting Entry" data-type="{{eid}}"><i class="fas fa-minus"></i> Del</a>
                    </div>
                    {{/if}}
                </div>
                <ol class="skills-list">
                    <li class="skill-grid" data-skill="spelldc">

                        <span class="skill-score" title="{{entry.data.spelldc.breakdown}}">{{entry.data.spelldc.dc}}</span>
                        <h4 class="skill-name">Spell DC</h4>
                        
                        <div class="skill-container">
                            <h4 class="skill-proficiency pf-title">Prof</h4>
                            <input type="hidden" name="data.items.{{eid}}.data.proficient.value" value="{{entry.data.proficient.value}}" data-dtype="Number"/>
                            <span class="skill-proficiency pf-value pf-rank proficiency-click" title="{{entry.data.spelldc.hover}}">{{{entry.data.spelldc.icon}}}</span>
                        </div>
                        <div class="skill-container">
                            <h4 class="skill-item pf-title">Item</h4>
                            <span class="skill-item pf-value item-value-input" title="Item">
                                <input type="text" value="{{entry.data.item.value}}"
                                        data-dtype="Number" placeholder="+0"/>
                            </span>
                        </div>
        
                    </li>
                    <li class="pf-two-grid" data-skill="spelldc">
                        <label class="skill-name">Spell Ability</label>
                        <div class="skill-name">
                            <select class="ability-select" name="data.items.{{eid}}.data.ability.value" data-type="String">
                                {{#select entry.data.ability.value}}
                                <option value="">None</option>
                                {{#each ../data.abilities as |abl a|}}
                                <option value="{{a}}">{{abl.label}}</option>
                                {{/each}}
                                {{/select}}
                            </select>
                        </div>
                    </li>

<!--                     <li class="pf-two-grid" data-skill="spelldc">
                        <label class="skill-name">Magic Tradition</label>
                        <div class="skill-name">
                            <select name="data.attributes.spellcasting.entry.{{id}}.tradition.value" data-type="String">
                                {{#select entry.tradition.value}}
                                {{#each ../magicTraditions as |name type|}}
                                <option value="{{type}}">{{name}}</option>
                                {{/each}}
                                {{/select}}
                            </select>
                        </div>
                    </li>

                    <li class="pf-three-grid" data-skill="spelldc">
                        <label class="skill-name">Spellcasting Type</label>
                        <div class="skill-name">
                            <select name="data.attributes.spellcasting.entry.{{id}}.prepared.value" data-type="String">
                                {{#select entry.prepared.value}}
                                {{#each ../preparationType as |name type|}}
                                <option value="{{type}}">{{name}}</option>
                                {{/each}}
                                {{/select}}
                            </select>
                        </div>
                        <a class="skill-name prepared-toggle" title="Toggle Spell Visibility"><i class="fas fa-haykal"></i></a>
                    </li> -->

                </ol>
            </li>

            {{#unless entry.prepared.preparedSpells}}
            <ol class="inventory-list directory-list">
                    {{#each entry.spellbook as |section lvl|}}
                        <li class="item inventory-header spellbook-header">
                            <div class="item-name flexrow">
                                <h3>{{section.label}}</h3>
                
                                {{#unless section.isCantrip}}
                                <span class="spell-slots-input">
                                    <input type="text" name="data.spells.spell{{lvl}}.value" value="{{section.uses}}" placeholder="0"/>
                                </span>
                                <span class="flex0"> / </span>
                                <span class="spell-max-input">
                                    <input type="text" name="data.spells.spell{{lvl}}.max" value="{{section.slots}}" placeholder="0"/>
                                </span>
                                {{else}}
                                <span class="spell-slots">&infin;</span>
                                <span class="flex0"> / </span>
                                <span class="spell-max">&infin;</span>
                                {{/unless}}
                            </div>
                
                            <div class="spell-school-header">School</div>
                            <div class="spell-action-header">Action</div>
                
                            {{#if ../owner}}
                            <div class="item-controls">
                                <a class="item-control spell-create" title="Create Spell" data-type="spell"
                                    data-level="{{lvl}}"><i class="fas fa-plus"></i> Add</a>
                            </div>
                            {{/if}}
                        </li>
                
                        
                        {{#each section.spells as |item i|}}
                        <li class="item" data-item-id="{{item.id}}">
                            <div class="item-name rollable">
                                <div class="item-image" style="background-image: url({{item.img}})"></div>
                                <h4>{{item.name}}</h4>
                            </div>
                
                            <div class="spell-school">{{item.data.school.str}}</div>
                            <div class="spell-action">{{item.data.time.value}}</div>
                
                            {{#if ../../owner}}
                            <div class="item-controls">
                                <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                                <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                            </div>
                            {{/if}}
                        </li>
                        {{/each}}
                        
                
                    {{else}}
                        <li class="item inventory-header spellbook-header spellbook-empty">
                            {{#if ../owner}}
                            <div class="item-controls pf-bluelist">
                                <a class="item-control spell-create" title="Create Spell" data-type="spell"
                                    data-level="{{lvl}}" data-location="{{entry.id}}"><i class="fas fa-plus"></i> Add Spell</a>
                            </div>
                            {{/if}}
                        </li>
                    {{/each}}
                </ol>
            {{else}}
                > public/systems/pf2e/templates/actors/tabs/actor-spellbook-prepared.html}}
            {{/unless}}


        {{/each}}
    </ol>

            <ol class="spellcastingEntry-list">
                <li class="item inventory-header spellbook-header spellbook-empty">
                    {{#if owner}}
                    <div class="item-controls pf-bluelist">
                        <a class="item-control spellcasting-create" title="Create Spell" data-type="spell"
                            data-level="{{lvl}}"><i class="fas fa-plus"></i> Add Spellcasting Entry</a>
                    </div>
                    {{/if}}
                </li>
            </ol>
        
   </div>